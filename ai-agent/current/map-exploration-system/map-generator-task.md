# 程序化地图生成系统 - 任务清单

## 当前阶段：规划中 📋

---

## 阶段一：地图生成器实现 

- [ ] 创建 `mapGenerator.js` 工具类
- [ ] 实现挖掘者算法核心逻辑
- [ ] 实现连通性检测（洪水填充）
- [ ] 实现通路占比计算
- [ ] 实现出口和出生点自动放置
- [ ] 单元测试编写

**预计时间**：2小时

---

## 阶段二：数据层集成

- [ ] 修改 `explorationMaps.js` 使用生成器
- [ ] 添加 `getTerrainAt` 辅助函数
- [ ] 适配 `isWalkable` 函数
- [ ] 适配 `isExit` 函数
- [ ] 测试数据结构兼容性

**预计时间**：1小时

---

## 阶段三：渲染优化

- [ ] 实现视口裁剪计算
- [ ] 优化 `drawMap` 循环范围
- [ ] 移除地形平铺逻辑
- [ ] 适配一维数组访问
- [ ] 性能测试（目标 >60 FPS）

**预计时间**：1小时

---

## 阶段四：状态管理适配

- [ ] 修改 `exploration.js` 的 `getTerrainAt`
- [ ] 测试移动和碰撞检测
- [ ] 测试遭遇率计算
- [ ] 测试出口触发

**预计时间**：30分钟

---

## 阶段五：验证和优化

- [ ] 连通性完整测试
- [ ] 通路占比验证
- [ ] 性能profiling
- [ ] 多次生成测试随机性
- [ ] 创建 walkthrough 文档

**预计时间**：1小时

---

*最后更新：2026-01-15*
