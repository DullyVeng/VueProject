# 小地图探索系统 - 任务清单

**当前状态**：规划阶段  
**最后更新**：2026-01-15

---

## 阶段一：基础框架搭建

- [ ] 创建小地图数据配置文件 `explorationMaps.js`
  - [ ] 定义网格地图数据结构
  - [ ] 定义地形类型（地面、墙壁、障碍物、出口）
  - [ ] 为现有地图定义对应的小地图配置
- [ ] 创建 `ExplorationMapView.vue` 组件
  - [ ] 基础组件结构
  - [ ] 地图渲染（CSS Grid）
  - [ ] 地形样式
- [ ] 添加路由配置 `/exploration/:mapId`
- [ ] 修改 `MapView.vue` "探索"按钮逻辑

---

## 阶段二：玩家移动系统

- [ ] 玩家角色实现
  - [ ] 玩家位置状态管理
  - [ ] 玩家角色渲染
  - [ ] 玩家朝向
- [ ] 移动控制
  - [ ] 键盘控制（WASD/方向键）
  - [ ] 点击移动（可选）
  - [ ] 移动动画过渡
- [ ] 碰撞检测
  - [ ] 墙壁碰撞
  - [ ] 障碍物碰撞
  - [ ] 地图边界检测
- [ ] 地图退出
  - [ ] 边缘退出区域检测
  - [ ] 返回大地图确认

---

## 阶段三：怪物系统

- [ ] 显性怪物
  - [ ] 怪物数据结构
  - [ ] 怪物渲染
  - [ ] 简单AI移动（可选）
  - [ ] 玩家碰撞检测
  - [ ] 触发战斗
- [ ] 隐性怪物
  - [ ] 遭遇概率计算
  - [ ] 每步移动检测
  - [ ] 遭遇触发战斗
- [ ] UI显示
  - [ ] 右下角遭遇率显示
  - [ ] 战斗过渡效果

---

## 下一步行动

**立即执行**：
1. 等待用户确认实现计划
2. 创建 `explorationMaps.js` 数据文件
3. 创建 `ExplorationMapView.vue` 组件

**需要确认**：
- 小地图尺寸（建议 20x15 格）
- 每格像素大小（建议 32px）
- 是否需要触屏移动支持
- [x] 遭遇率UI显示

---

## 后续优化任务（已规划）

### 程序化地图生成系统

详见：[地图生成器任务清单](./map-generator-task.md)

- [ ] 实现挖掘者算法地图生成器
- [ ] 集成到explorationMaps数据层
- [ ] 视口裁剪渲染优化
- [ ] 适配一维Int8Array数据结构
- [ ] 性能测试和验证

**预计工作量**：5.5小时

---

*最后更新：2026-01-15*
