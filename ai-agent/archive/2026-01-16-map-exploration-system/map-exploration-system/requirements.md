# 小地图探索系统 - 需求文档

**创建时间**：2026-01-15  
**来源**：用户需求

---

## 原始需求

> 重构地图系统，目前前往地图后，只有探索和采集两个功能按钮，探索就是战斗，采集就是概率性获得材料。需要加深探索功能。分为大地图和小地图，大地图就是目前的地图，前往地图区域后，应该有个按钮进入地图(比如现在的探索)，点击后会进入一个地图页面，有点像《勇者斗恶龙》RPG游戏的那种，在地图上移动和探索，可以偶遇怪物，怪物分显性怪物(可以主动触碰触发战斗)和隐性怪物(每移动一格概率性遭遇)，再地图右下角显示偶遇隐性怪物的概率。偶尔稀有NPC，地图边缘就可以退出到大地图。

---

## 需求分解

### 核心需求

| 编号 | 需求描述 | 优先级 |
|------|----------|--------|
| R001 | 大地图"探索"按钮改为进入小地图 | P0 |
| R002 | 小地图网格化显示，玩家可自由移动 | P0 |
| R003 | 显性怪物：地图上可见，碰撞触发战斗 | P0 |
| R004 | 隐性怪物：每步移动概率触发战斗 | P0 |
| R005 | 右下角显示隐性遭遇概率 | P0 |
| R006 | 地图边缘可退出返回大地图 | P0 |

### 可选需求（后续迭代）

| 编号 | 需求描述 | 优先级 |
|------|----------|--------|
| R007 | 稀有NPC随机出现 | P1 |
| R008 | 地图内宝箱 | P1 |
| R009 | 地图内采集点 | P1 |
| R010 | 小地图存档/进度保存 | P2 |

---

## UI/UX 要求

1. **视觉风格**：保持现有游戏的修仙玄幻风格
2. **地图尺寸**：约 20x15 格，每格 32px
3. **响应式**：适配不同屏幕尺寸
4. **控制方式**：
   - 键盘：WASD / 方向键
   - 可选：点击移动
5. **反馈**：移动时有视觉反馈，战斗触发有过渡效果

---

## 参考游戏

- 《勇者斗恶龙》系列的2D地图探索模式
- 随机遭遇战斗机制

---

*最后更新：2026-01-15*
