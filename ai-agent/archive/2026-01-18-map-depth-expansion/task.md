# 小地图深度扩展 - 任务清单

**创建时间**：2026-01-18
**当前状态**：规划中

---

## 阶段一：怪物系统升级

### 精英怪系统
- [x] 定义精英怪数据结构（`data/eliteMonsters.js`）
  - [x] 精英怪比基础怪生命值 x2、攻击力 x1.5
  - [x] 精英怪前缀系统（狂暴、坚韧、迅捷等）
  - [x] 精英怪特殊词条增益
- [x] 修改 `explorationMaps.js` 中 `visibleMonsters` 改为精英怪
- [ ] 扩展怪物渲染逻辑（显示精英标识）

### 地图首领 BOSS 系统
- [x] 定义 BOSS 数据结构（`data/mapBosses.js`）
  - [x] 每个地图一个固定 BOSS
  - [x] BOSS 属性远超普通怪物
  - [x] BOSS 特殊掉落（封印法宝、建筑图纸）
- [x] 在地图中预设 BOSS 位置（固定位置）
- [x] BOSS 击败后进入冷却期（24小时刷新）
- [x] 创建数据库表 `boss_defeats`
- [ ] 扩展 `ExplorationMapView` 渲染 BOSS 标识

---

## 阶段二：宝箱系统

### 宝箱数据结构
- [x] 创建 `data/chests.js` 定义宝箱配置
  - [x] 宝箱类型：木箱、铁箱、金箱
  - [x] 宝箱内容概率表
  - [x] 宝箱刷新机制
- [x] 修改 `explorationMaps.js` 添加宝箱位置

### 宝箱交互
- [x] 在 `exploration.js` store 中添加宝箱状态管理
- [ ] 扩展 `ExplorationMapView` 宝箱渲染和碰撞检测
- [x] 实现宝箱开启动画和奖励弹窗

---

## 阶段三：奖励系统完善

### 精英怪奖励
- [x] 精英怪掉落5倍
- [x] 精英怪可掉落稀有法宝

### BOSS 奖励
- [x] BOSS 必掉灵石（大量）
- [x] BOSS 概率掉落封印法宝
- [x] BOSS 概率掉落建筑图纸
- [x] BOSS 首杀奖励

---

## 阶段四：UI 与体验优化

- [x] 迷你地图上显示 BOSS 和宝箱图标
- [x] 精英怪标识（皇冠图标）
- [x] BOSS 特殊渲染（大型+光环+皇冠）
- [x] 宝箱渲染（三种颜色）
- [x] BOSS 方向指引 UI（箭头+距离）
- [x] 宝箱开启特效弹窗（已实现）

---

## 下一步行动

**状态**：核心功能已完成，可进行测试

1. 进入小地图验证精英怪、BOSS、宝箱显示
2. 测试 BOSS 击败后 24 小时刷新机制
3. 测试宝箱开启和奖励
4. 后续可以添加宝箱开启动画弹窗
